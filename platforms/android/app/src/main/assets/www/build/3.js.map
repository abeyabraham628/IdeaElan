{"version":3,"sources":["../../src/pages/apply-leave/apply-leave.module.ts","../../src/models/leave.model.ts","../../src/models/datepicker.ts","../../src/pages/apply-leave/apply-leave.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ApplyLeavePage } from './apply-leave';\r\nimport { CustomDatePicker } from '../../models/datepicker';\r\nimport { LeaveModel } from '../../models/leave.model';\r\n\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ApplyLeavePage,\r\n    \r\n  ],\r\n  providers: [CustomDatePicker,LeaveModel],\r\n  imports: [\r\n    IonicPageModule.forChild(ApplyLeavePage),\r\n    ],\r\n\r\n})\r\nexport class ApplyLeavePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apply-leave/apply-leave.module.ts","\r\n\r\nimport { leaves,leaveCount } from '../providers/user-leaves';\r\n\r\nimport { AngularFireDatabase,AngularFireList } from '@angular/fire/database';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Injectable } from '@angular/core';\r\nimport { AlertController } from 'ionic-angular';\r\n\r\n@Injectable()\r\nexport class LeaveModel{\r\nmonthNumber:number[]=[]\r\nleave={} as leaves\r\nleaveCount={} as leaveCount\r\n\r\n\r\n  constructor(private afauth:AngularFireAuth,private firebase:AngularFireDatabase,private alert:AlertController){}\r\n\r\n   arrangeDates(date:any){\r\n        \r\n        let selectedDates=[]\r\n        this.leave.date=[]\r\n        this.leave.date2=[]\r\n         date.forEach((values)=>{\r\n             selectedDates.push(new Date(values.time).toLocaleDateString())// Converting the time property returned from date pikcer to  dates .\r\n             this.monthNumber.push(values.months)//Taking the month number which user has selected for  leave\r\n          })   \r\n         \r\n          this.monthNumber = this.monthNumber.filter((elem, i, arr) => {\r\n             if (arr.indexOf(elem) === i) {\r\n               return elem\r\n             }\r\n           })\r\n           \r\n        \r\n        if(this.monthNumber.length===1){\r\n           selectedDates.forEach(date=>{\r\n             this.leave.date.push(date);\r\n           });\r\n          \r\n         }\r\n         \r\n         else if(this.monthNumber.length===2){\r\n          selectedDates.forEach(date=>{\r\n             if((new Date(date).getMonth()+1).toString()===this.monthNumber[0].toString())\r\n             this.leave.date.push(date);\r\n            if((new Date(date).getMonth()+1).toString()==this.monthNumber[1].toString())\r\n            this.leave.date2.push(date);\r\n           });\r\n        }\r\n           return this.leave\r\n       }\r\n\r\n\r\n       async submitLeaveRequest(leaveInfo){\r\n        let userId=this.afauth.auth.currentUser.uid;\r\n        var userName:any\r\n       await this.firebase.database.ref(`users/${userId}`).once('value',(snap)=>{\r\n          console.log(snap.val())\r\n          userName=snap.child('fname').val()+\" \"+snap.child('lname').val()\r\n        })\r\n  \r\n        this.leave.status=\"pending\";\r\n        \r\n        \r\n       if(new Date().getHours()<9){\r\n          const alert = this.alert.create({\r\n            title: 'Restricted',\r\n            subTitle: 'Unable to process your request at this moment. Please contact your team leader.!',\r\n            buttons: ['OK']\r\n            });\r\n          alert.present();\r\n      }\r\n        \r\n      else{\r\n        if(leaveInfo.date2){\r\n          var x=this.firebase.list(`EmployeeLeaves`).push({\r\n            'name':userName,\r\n            'leaveType':leaveInfo.leaveType,\r\n            'date':leaveInfo.date,\r\n            'status':leaveInfo.status,\r\n            'userId':userId\r\n            //'count':this.leave.count\r\n           }).then(()=>{\r\n            var y=this.firebase.list(`EmployeeLeaves`).push({\r\n              'name':userName,\r\n              'leaveType':leaveInfo.leaveType,\r\n              'date':leaveInfo.date2,\r\n              'status':leaveInfo.status,\r\n              'userId':userId\r\n          })\r\n           \r\n          })//inserting the details of leaves\r\n          \r\n        }\r\n        else\r\n            this.firebase.list(`EmployeeLeaves`).push({\r\n              'name':userName,\r\n              'leaveType':leaveInfo.leaveType,\r\n              'date':leaveInfo.date,\r\n              'status':leaveInfo.status,\r\n              'userId':userId\r\n            });\r\n      \r\n  \r\n       \r\n      }//end of if else \r\n           \r\n         \r\n      }//end os submit leave request function\r\n\r\n\r\n\r\n      pastLeaves=[]\r\n  \r\n      async getPastLeaves(month?,year?){\r\n       let pastLeaves=[]\r\n       await this.firebase.database.ref(`EmployeeLeaves`).orderByChild(`userId`).equalTo(`${this.afauth.auth.currentUser.uid}`).once('value',(snap)=>{\r\n             snap.forEach(function(child){\r\n                 pastLeaves.push({\r\n                   $key:child.key,\r\n                   ...child.val()\r\n                 })\r\n               })\r\n             \r\n       })\r\n       this.pastLeaves=pastLeaves.reverse()\r\n         \r\n        \r\n            \r\n        \r\n   }//end of function\r\n   \r\n    async getRemainingLeaves(userId){\r\n      let remaininingLeaves=[]\r\n     \r\n     let count:number=0\r\n     \r\n     \r\n         await  this.firebase.database.ref(`AvailableLeaves/${new Date().getFullYear()}/${userId}`).once('value',(snapshot)=>{\r\n            remaininingLeaves.push({'casual':snapshot.child('casual').val(),\r\n                                    'sick':snapshot.child('sick').val(),})\r\n            \r\n        \r\n       }).then(async ()=>{ await this.firebase.database.ref(`EmployeeLeaves`).orderByChild(`userId`).equalTo(`${this.afauth.auth.currentUser.uid}`).once('value',(snap)=>{\r\n             snap.forEach((child)=>{\r\n               \r\n                   if(child.child('date').val().length>1){\r\n                     child.child('date').forEach(data=>{\r\n                       if(new Date(data.val()).getMonth()+1===new Date().getMonth()+1 && new Date(data.val()).getFullYear()===new Date().getFullYear())\r\n                       count+=1\r\n                       });\r\n                     }\r\n                     else{\r\n                       if(new Date(child.child('date').val()).getMonth()+1===new Date().getMonth()+1 && new Date(child.child('date').val()).getFullYear()===new Date().getFullYear())\r\n                         count+=1;\r\n                     }\r\n                     \r\n                     });\r\n                     remaininingLeaves.push({'currentMonthLeave':count})\r\n                     \r\n                     \r\n                   })\r\n                   console.log(remaininingLeaves)\r\n                   return Promise.resolve(remaininingLeaves)\r\n                                   \r\n                });\r\n                \r\n             \r\n         \r\n       \r\n         \r\n         \r\n         \r\n       \r\n       \r\n   }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}// end of class\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/leave.model.ts","\r\nimport {CalendarComponentOptions } from \"ion2-calendar\";\r\n\r\nimport { Component, Injectable } from '@angular/core'; \r\nimport { ModalController, ViewController } from 'ionic-angular';\r\nimport { resolve } from \"path\";\r\n\r\n\r\n@Injectable()\r\nexport class CustomDatePicker{\r\n    \r\nconstructor(public modalCtrl:ModalController){}\r\ntony:any\r\n\r\n datePickerOptions(dateLimitTo?,disableWeeks?)  {\r\n \r\n    const options: CalendarComponentOptions = {\r\n        pickMode: 'multi',\r\n        showAdjacentMonthDay:false,\r\n        disableWeeks: disableWeeks,\r\n        from:new Date(),\r\n        to: dateLimitTo\r\n    }\r\n    return options\r\n        \r\n    \r\n    \r\n}\r\n\r\n\r\n\r\n  getMonths(){\r\n    return [{'monthName':'January','value':'01'},\r\n            {'monthName':'February','value':'02'},  \r\n            {'monthName':'March','value':'03'},\r\n            {'monthName':'April','value':'04'},  \r\n            {'monthName':'May','value':'05'},  \r\n            {'monthName':'June','value':'06'},  \r\n            {'monthName':'July','value':'07'}, \r\n            {'monthName':'August','value':'08'},  \r\n            {'monthName':'September','value':'09'},  \r\n            {'monthName':'October','value':'10'},  \r\n            {'monthName':'November','value':'11'},  \r\n            {'monthName':'December','value':'12'}]\r\n\r\n    }     \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/datepicker.ts","\r\n\r\nimport { Component} from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController, ModalController, LoadingController } from 'ionic-angular';\r\n\r\n\r\nimport { DatePipe } from '@angular/common';\r\n\r\nimport { CalendarModal,CalendarResult,CalendarComponentOptions } from \"ion2-calendar\";\r\n\r\nimport { LeaveModel } from '../../models/leave.model';\r\nimport { CustomDatePicker } from '../../models/datepicker';\r\nimport {leaveCount} from '../../providers/user-leaves'\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Generated class for the ApplyLeavePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-apply-leave',\r\n  templateUrl: 'apply-leave.html',\r\n})\r\nexport  class ApplyLeavePage{\r\n \r\n\r\nleaveCount={} as leaveCount\r\nionSegmentDefaultValue:string\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n \r\n   \r\n   constructor(private afauth:AngularFireAuth,public navCtrl: NavController, public navParams: NavParams,private modalCtrl:ModalController,private customDatePicker:CustomDatePicker,private userLeave:LeaveModel) {\r\n            this.ionSegmentDefaultValue=\"applyLeave\";\r\n            this.remaining()\r\n            \r\n            \r\n     }\r\n\r\n  months=this.customDatePicker.getMonths()\r\n\r\n       \r\n          \r\n     \r\n        \r\n  ionViewDidLoad() {\r\n    \r\n  }\r\n\r\n  leaveDates:any=[]\r\n   datePicker(){\r\n   \r\n    let dateLimit=new Date().setDate(new Date().getDate()+45)// Display  45 days from today\r\n    let disableWeek=[0,6]// disable Sunday-0 and Saturday-6\r\n    let options=this.customDatePicker.datePickerOptions(dateLimit,disableWeek)\r\n    \r\n     \r\n    let myCalendar =  this.modalCtrl.create(CalendarModal, {\r\n      options: options,\r\n      });\r\n         \r\n      myCalendar.present();\r\n       \r\n      myCalendar.onDidDismiss((date: CalendarResult[]) => {\r\n        date.sort(function (a, b) { // sorting the dates in ascending order with the time property\r\n          return a.time - b.time;\r\n        });\r\n\r\n            this.userLeave.arrangeDates(date)\r\n          \r\n      \r\n      })//end of displayCalendar function\r\n }// end of datepicker function\r\n\r\n applyForLeave(leaveDates){\r\n   this.userLeave.submitLeaveRequest(leaveDates)\r\n }\r\n\r\n pastLeave(){\r\n   this.userLeave.getPastLeaves()\r\n }\r\n\r\n   async remaining(){\r\n     \r\n    let x=await this.userLeave.getRemainingLeaves(this.afauth.auth.currentUser.uid).then(x => console.log(x))\r\n     \r\n    \r\n    \r\n  \r\n }\r\n    \r\n    \r\n  \r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n}// end of class\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apply-leave/apply-leave.ts"],"sourceRoot":""}