<ion-header>
  <page-header title="Recruitment"></page-header>
</ion-header>



  <ion-content>

      <ion-segment [(ngModel)]="leaves" color="white" >
         <ion-segment-button value="viewLeaveRequests">
            Leave Requests
         </ion-segment-button>
         <ion-segment-button value="leaveHistory" (click)="getEmployee()" >
          History
         </ion-segment-button>
      </ion-segment>
  <div [ngSwitch]="leaves">
    <div *ngSwitchCase="'viewLeaveRequests'">
    
        
        <div *ngIf="(leaveRequests.length==0)" style="text-align:center">No Leave Requests</div>
      <ion-card (click)="goto('ApproveLeavePage',user)" *ngFor="let user of leaveRequests">
         
        <ion-item>
          <ion-avatar item-start>
              <img src="https://firebasestorage.googleapis.com/v0/b/sopaa-b37c1.appspot.com/o/{{user.userId}}.jpg?alt=media&token=36f41e79-9cfc-40c8-b4ca-192113ff40b" onerror="this.src='assets/imgs/companylogo.png'"> 
           <!-- <img src="assets/imgs/companylogo.png">-->
          </ion-avatar>
          <h2>{{user.name |  titlecase}}</h2>
          <p>{{user.leaveType | titlecase}}</p>
          <p>{{user.date}}</p>
        </ion-item>
        
        
      </ion-card>
    

    
    </div>

    <div *ngSwitchCase="'leaveHistory'">
       
      <ion-item>
          <ion-label>Employee Name</ion-label>
        <ion-select [(ngModel)]="employeeKey">
                 <ion-option *ngFor="let emp of employeeName" value="{{emp.$key}}">{{emp.fname | titlecase}} {{emp.lname | titlecase}}</ion-option>
        </ion-select>
      </ion-item>
      
              <ion-item col-12>
                 <ion-label floating>Select Date</ion-label>
                 <ion-input type="text" [(ngModel)]="dateRange" (click)="datePicker('range')" readonly></ion-input>
                 <ion-icon name="calendar" item-right></ion-icon>
               </ion-item>
           
      

      
      <ion-list>
        
          <h6 text-center class="title section-title">{{dateRange}}</h6>
          <div *ngIf="(leaveRecords.length==0)" style="text-align:center">No record found</div>
          <ion-list >
            <ion-item *ngFor="let x of leaveRecords" style="background-color:honeydew">
              <h3>{{x.leaveType | titlecase}} Leave</h3>
              <h5> {{x.date}}</h5>
              <h5 [ngClass]='x.status'>{{x.status}}</h5>
              <div *ngIf="(x.reason!=null)">
                  Comments: {{x.reason}}
                </div>
                
            </ion-item>
          </ion-list>
  
             
          </ion-list>

      
    </div>


  </div>
    
  </ion-content>
  
 