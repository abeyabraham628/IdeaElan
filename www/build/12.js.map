{"version":3,"sources":["../../src/pages/apply-leave/apply-leave.module.ts","../../src/pages/apply-leave/apply-leave.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ApplyLeavePage } from './apply-leave';\n\n@NgModule({\n  declarations: [\n    ApplyLeavePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ApplyLeavePage),\n  ],\n})\nexport class ApplyLeavePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apply-leave/apply-leave.module.ts","import { leaves } from './../../providers/user-leaves';\nimport { Component, Type } from '@angular/core';\nimport { IonicPage, NavController, NavParams,AlertController } from 'ionic-angular';\nimport { DatePicker } from '@ionic-native/date-picker';\nimport { AngularFireDatabase,AngularFireList } from '@angular/fire/database';\nimport { DatePipe } from '@angular/common';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { leave } from '@angular/core/src/profile/wtf_impl';\nimport { ConditionalExpr } from '@angular/compiler';\n\n/**\n * Generated class for the ApplyLeavePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-apply-leave',\n  templateUrl: 'apply-leave.html',\n})\nexport class ApplyLeavePage {\nfromDate:string;\ntoDate:string;\nleaveList:AngularFireList<any>\nleave={} as leaves\nsickRemaining:number;\ncasualRemaining:number;\n  constructor(public navCtrl: NavController, public navParams: NavParams,private datePicker:DatePicker, private firebase:AngularFireDatabase,private datepipe:DatePipe,private afauth:AngularFireAuth,private alert:AlertController) {\n   \n    \n  }\n\n  ionViewDidLoad() {\n    this.getRamainingLeaves()\n  }\n\n  dispdate(type:String){\n    this.datePicker.show({\n    date: new Date(),\n    mode: 'date',\n    androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_LIGHT\n  }).then(\n    date=>{\n     if(type===\"from\"){\n       this.leave.dateFrom = new Date(date).toLocaleDateString()\n     }\n     else{\n       this.leave.dateTo= new Date(date).toLocaleDateString()\n     }\n   },err => console.log('Error occurred while getting date: ', err)\n\n   );\n  }//end of date function\n\n \n\n  \n  submitLeaveRequest(){\n      let uid=this.afauth.auth.currentUser.uid;\n      this.leave.status=\"pending\";\n      \n     if(new Date().getHours()>9){\n        const alert = this.alert.create({\n          title: 'Restricted',\n          subTitle: 'Unable to process your request at this moment. Please contact your team leader.!',\n          buttons: ['OK']\n          });\n        alert.present();\n    }\n      \n    else{\n      var result=[]\n      var firebase= this.firebase;\n      firebase.database.ref(`EmployeeLeaves/${uid}/AvailableLeaves`).once(\"value\",function(snapshot) {\n       if(snapshot.val()==null){\n                firebase.database.ref(`Leaves`).on(\"value\",function(snapshot){\n                firebase.object(`EmployeeLeaves/${uid}/AvailableLeaves`).set(snapshot.val())\n             })\n       }\n       \n        snapshot.forEach(function(childSnapshot) {\n          result={\n          $key:childSnapshot.key,\n          ...childSnapshot.val()\n          }\n            return false;\n        });//end of snap for each\n    });//end of database.ref\n\n     firebase.list(`EmployeeLeaves/${uid}/Leaves`).push(this.leave);\n    }//end of if else \n        \n       \n    }//end os submit leave request function\n\n\n  pastLeaves:any[]\n  \n   getPastLeaves(){\n    \n    this.firebase.list(`EmployeeLeaves/${this.afauth.auth.currentUser.uid}/Leaves`).snapshotChanges().subscribe(\n      list=>{\n        this.pastLeaves=list.map(item=>{\n          return{\n            $key:item.key,\n            ...item.payload.val()\n          };\n          });\n      }); \n}//end of function\n\nasync getRamainingLeaves(){\n    await this.firebase.database.ref(`EmployeeLeaves/${this.afauth.auth.currentUser.uid}/AvailableLeaves`).on('value',(snapshot)=>{\n      this.sickRemaining=snapshot.child('sick').val()\n      this.casualRemaining=snapshot.child('casual').val()\n    })//end of database ref\n}\n    \n  find(){\n    let parts:any ='29/12/2018'.split('/');\n    console.log(new Date())\n\n    var mydate = new Date(parts[1] , parts[0], parts[2]).getDate(); \n    console.log(mydate);\n  }   \n    \n\n  \n\n}// end of class\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apply-leave/apply-leave.ts"],"sourceRoot":""}