{"version":3,"sources":["../../src/pages/myprofile/myprofile.module.ts","../../src/pages/myprofile/myprofile.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MyprofilePage } from './myprofile';\n\n@NgModule({\n  declarations: [\n    MyprofilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MyprofilePage),\n    \n  ],\n})\nexport class MyprofilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/myprofile/myprofile.module.ts","//Abey Abraham\r\n\r\nimport { DataService } from './../../providers/form-service';\r\nimport { Storage } from '@ionic/storage';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController, ModalController } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the MyprofilePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-myprofile',\r\n  templateUrl: 'myprofile.html',\r\n})\r\nexport class MyprofilePage {\r\n uri:any\r\n\r\n  $key:any\r\n  fName:  any\r\n  lName:  any\r\n  email:  any\r\n  mobile: any\r\n  dob:    any\r\n  doj:    any\r\n  jobTitle:any\r\n\r\n  profileForm=new FormGroup({\r\n    $key:new FormControl(null),\r\n    fName:new FormControl('', [Validators.required, Validators.pattern('[a-zA-Z]*'), Validators.minLength(2)]),\r\n    lName:new FormControl('', [Validators.required, Validators.pattern('[a-zA-Z]*'), Validators.minLength(2)]),\r\n    mobile:new FormControl('', [Validators.required, Validators.pattern('^([6-9])([0-9]{9})$'), Validators.minLength(10)]),\r\n   \r\n  })\r\n\r\n  constructor(public data:DataService,public cache: Storage,public myModal:ModalController,public toastCtrl:ToastController,public navCtrl: NavController, public navParams: NavParams,public firebase:AngularFireDatabase,public afauth:AngularFireAuth) {\r\n    //this.retrieveProfile()\r\n  \r\n    //.uri=`https://firebasestorage.googleapis.com/v0/b/sopaa-b37c1.appspot.com/o/${this.afauth.auth.currentUser.uid}.jpg?alt=media&token=36f41e79-9cfc-40c8-b4ca-192113ff40b5${new Date().toLocaleTimeString()}`\r\n    this.data.currentUri.subscribe(item=>this.uri=item)\r\n  }\r\n\r\n \r\n\r\n  retrieveProfile(){\r\n    this.firebase.database.ref(`users/${this.afauth.auth.currentUser.uid}`).on('value',(snap)=>{\r\n    this.profileForm.controls['$key'].setValue(this.$key=snap.key)\r\n    this.profileForm.get('fName').setValue(this.fName=snap.child('fname').val())\r\n    this.profileForm.get('lName').setValue(this.lName=snap.child('lname').val())\r\n    this.profileForm.get('mobile').setValue(this.mobile=snap.child('mobile').val())\r\n    this.email=snap.child('email').val()\r\n    this.doj=snap.child('doj').val()\r\n    this.dob=snap.child('dob').val()\r\n    this.jobTitle=snap.child('position').val()\r\n    })\r\n  }\r\n\r\n \r\n  updateProfile(){\r\n  if(this.profileForm.valid){\r\n    if(this.$key!=\"\")\r\n      this.firebase.list('users').update(this.$key,{\r\n          fname: this.profileForm.get('fName').value,\r\n          lname:this.profileForm.get('lName').value,\r\n          mobile:this.profileForm.get('mobile').value\r\n      }).then(()=>{\r\n          let toast=this.toastCtrl.create({\r\n            message:'Profile updated successfully',\r\n            duration:3000\r\n          })\r\n          toast.present()\r\n      })\r\n    }\r\n  }\r\n\r\n \r\n\r\n  showmodal()\r\n  {\r\n    console.log(\"hiiii\");\r\n    const mydata={\r\n      uri :`${this.uri}`\r\n    };\r\n    const modal=this.myModal.create('ModalPage',{mydata});\r\n    modal.onDidDismiss(() => {\r\n     \r\n     this.uri=`https://firebasestorage.googleapis.com/v0/b/sopaa-b37c1.appspot.com/o/${this.afauth.auth.currentUser.uid}.jpg?alt=media&token=36f41e79-9cfc-40c8-b4ca-192113ff40b5${new Date().toLocaleTimeString()}`\r\n  \r\n  });\r\n    modal.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/myprofile/myprofile.ts"],"sourceRoot":""}