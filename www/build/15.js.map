{"version":3,"sources":["../../src/pages/modifysystems/modifysystems.module.ts","../../src/pages/modifysystems/modifysystems.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ModifysystemsPage } from './modifysystems';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ModifysystemsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ModifysystemsPage),\r\n    ComponentsModule\r\n  ],\r\n})\r\nexport class ModifysystemsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modifysystems/modifysystems.module.ts","//Tony Manuel\r\n\r\nimport { DatePicker } from '@ionic-native/date-picker';\r\n\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\r\n\r\n\r\nimport {  AngularFireDatabase } from '@angular/fire/database';\r\n\r\nimport { Component, Injectable } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\r\nimport * as moment from 'moment'\r\nimport { DataService } from '../../providers/form-service';\r\n\r\n/**\r\n * Generated class for the ModifysystemsPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-modifysystems',\r\n  templateUrl: 'modifysystems.html',\r\n})\r\n@Injectable()\r\nexport class ModifysystemsPage {\r\n \r\n    fieldName:string\r\n    params:any\r\n    showDefault:boolean=false;\r\n    showSystemUser:boolean=false;\r\n    showavExpiry:boolean=false;\r\n\r\n    default:string;\r\n    systemUser:string;\r\n    avExpiry:string;\r\n    fieldErr:boolean=true\r\n   \r\n  constructor(public barcode:BarcodeScanner,public datePicker:DatePicker,public formData:DataService,public navCtrl: NavController, public navParams: NavParams,public firebase:AngularFireDatabase,public alertCtrl:AlertController) {\r\n    this.getUsers()  \r\n    this.params=navParams.data[0]\r\n   \r\n      \r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    \r\n    switch(this.params.fieldName){\r\n      case 'keyboard' : this.fieldName='Key Board';\r\n                        this.default=this.params.fieldVal\r\n                        \r\n                        this.showDefault=true\r\n                        break;\r\n      case 'mouse'    : this.fieldName='Mouse';\r\n                        this.default=this.params.fieldVal\r\n                        this.showDefault=true\r\n                        break;\r\n      case 'processor': this.fieldName='Processor';\r\n                        this.default=this.params.fieldVal\r\n                        this.showDefault=true\r\n                        break;\r\n      case 'hdd'      : this.fieldName='Hard Disk';\r\n                        this.default=this.params.fieldVal\r\n                        this.showDefault=true\r\n                        break;\r\n      case 'memory'   : this.fieldName='Ram';\r\n                        this.default=this.params.fieldVal\r\n                        this.showDefault=true\r\n                        break;\r\n      case 'avExpiry' : this.fieldName='Antivirus Expiry';\r\n                        this.avExpiry=this.params.fieldVal\r\n                        this.showavExpiry=true\r\n                        break;\r\n      case 'systemUser': this.fieldName='System User';\r\n                        this.systemUser=this.params.fieldVal\r\n                        this.showSystemUser=true\r\n                        break;   \r\n      \r\n\r\n}\r\n    \r\n  }\r\n\r\n  employeeList=[]\r\n\r\ngetUsers(){\r\n  this.firebase.list(`users`).snapshotChanges().subscribe(list=>{\r\n      this.employeeList=list.map(item=>{\r\n        return{\r\n          '$key':item.key,\r\n          'fName':item.payload.child('fname').val(),\r\n          'lName':item.payload.child('lname').val()\r\n        }\r\n       \r\n      })\r\n      \r\n\r\n  })\r\n\r\n \r\n}\r\n\r\nupdateSystems(){\r\n\r\nconsole.log(\":fds\")\r\n\r\n  let value:string\r\n  var flag:boolean=false\r\n  var uname:any\r\n  switch(this.params.fieldName){\r\n\r\n    case 'keyboard' : \r\n    case 'mouse'    : \r\n    case 'processor': \r\n    case 'hdd'      : \r\n    case 'memory'   : value=this.default;break\r\n    case 'avExpiry' : value=this.avExpiry;break;\r\n    case 'systemUser': flag=true\r\n                      value=this.systemUser;\r\n                       let empObj=this.employeeList.find(key=>key.$key==this.systemUser)\r\n                        uname=empObj.fName+\" \"+empObj.lName;\r\n                         \r\n                      break;   \r\n  }\r\n\r\n    if(value==null || value==\"\" || value.length<3){\r\n      this.fieldErr=false;\r\n      \r\n    }\r\n    else{\r\n      this.fieldErr=true;\r\n      this.firebase.list(`maintenance/${this.params.$key}`).push({\r\n        'type':{'name':this.params.fieldName,'value':flag?uname:value},\r\n        \r\n        date:moment().format('D-MMM-YYYY'),\r\n        userKey:this.params.userKey!=this.systemUser?this.params.userKey:value,\r\n        userName:this.params.userName\r\n      }).then(()=>{\r\n        this.firebase.list(`systems`).update(this.params.$key,{\r\n          [this.params.fieldName]:value\r\n        }).then(()=>{\r\n          let alert=this.alertCtrl.create({\r\n            title:\"Success\",\r\n            message:this.fieldName+\" updated successfully\",\r\n            buttons: [{\r\n            text:'OK',\r\n            handler:()=>{\r\n              this.formData.changeValue(value)\r\n              this.navCtrl.pop()\r\n            }\r\n            }]\r\n          })\r\n          alert.present();\r\n         \r\n        })\r\n      })\r\n        \r\n    }//end of if else error\r\n     \r\n  }\r\n\r\n  dispdate(){\r\n    this.datePicker.show({\r\n      date:moment().toDate(),\r\n      mode:'date',\r\n      androidTheme: 5,\r\n    }).then(\r\n      date=>{\r\n          this.avExpiry=moment(date).format('D-MMM-YYYY')\r\n        },\r\n      err => console.log('Error occurred while getting date: ', err)\r\n    )\r\n  }\r\n\r\n  scanBarCode(type:string){\r\n    this.barcode.scan().then(barcodeData => {\r\n      this.default=barcodeData.text\r\n     }).catch(err => {\r\n         console.log('Error', err);\r\n     });\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modifysystems/modifysystems.ts"],"sourceRoot":""}