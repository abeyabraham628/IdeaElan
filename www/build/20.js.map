{"version":3,"sources":["../../src/pages/interview-schedule/interview-schedule.module.ts","../../src/pages/interview-schedule/interview-schedule.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { InterviewSchedulePage } from './interview-schedule';\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    InterviewSchedulePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(InterviewSchedulePage),\r\n    ComponentsModule\r\n\r\n  ],\r\n})\r\nexport class InterviewSchedulePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/interview-schedule/interview-schedule.module.ts","//Author Tony Manuel\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { DatePicker } from '@ionic-native/date-picker';\r\nimport * as moment from 'moment';\r\nimport { AngularFireList, AngularFireDatabase } from '@angular/fire/database';\r\n\r\n/**\r\n * Generated class for the InterviewSchedulePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-interview-schedule',\r\n  templateUrl: 'interview-schedule.html',\r\n})\r\nexport class InterviewSchedulePage {\r\n  applicantKeys:string[] = [];\r\n //Initialising schedule form\r\n scheduleForm=new FormGroup({\r\n  scheduleDate:new FormControl('',Validators.required),\r\n  scheduleTime:new FormControl('',[Validators.required]),\r\n  contactPerson:new FormControl('',[Validators.required,Validators.minLength(4)]),\r\n  contactPersonNum: new FormControl('',[Validators.required,Validators.minLength(10)]),\r\n  jobTitle: new FormControl('', Validators.required)\r\n \r\n});\r\n  constructor(public alertCtrl:AlertController, private datePicker:DatePicker,public navCtrl: NavController, public navParams: NavParams,private firebase:AngularFireDatabase) {\r\n    this.applicantKeys=this.navParams.data\r\n   this.getSchedules()\r\n  }\r\n\r\n  dispdate(){// Funciton for displaying the date picker for selecting interview date\r\n    this.datePicker.show({\r\n      date:new Date(),\r\n      mode:'date',\r\n      \r\n      androidTheme: 5,\r\n    }).then(\r\n      date=>{\r\n        this.scheduleForm.controls.scheduleDate.setValue(moment(date).format('D-MMM-YYYY'))\r\n       },\r\n      err => console.log('Error occurred while getting date: ', err)\r\n    )\r\n  }//end of function\r\n\r\n  applicantList:AngularFireList<any>=this.firebase.list('Applicants');\r\n  scheduleList:AngularFireList<any>;\r\n \r\n  \r\n    //\r\n    getSchedules(){\r\n      this.scheduleList=this.firebase.list('schedules');\r\n      return this.scheduleList.snapshotChanges();\r\n     };\r\n\r\n  saveSchedule(){\r\n    \r\n    \r\n    let schedule={  \r\n                    jobTitle:this.scheduleForm.controls.jobTitle.value, \r\n                    interviewTime:this.scheduleForm.controls.scheduleTime.value, \r\n                    contactPerson:this.scheduleForm.controls.contactPerson.value,\r\n                    contactNumber:this.scheduleForm.controls.contactPersonNum.value\r\n                  }\r\n      \r\n                  \r\n      //Schedule details is pushed first to the db and then the key of that particular record is retrieved\r\n      //Once the key is retrieved,that key is add as a reference to the interviewDate field for the selected candidated record. \r\n      \r\n    \r\n\r\n\r\n      this.scheduleList.push({//New schedule is created\r\n        interviewDate:this.scheduleForm.controls.scheduleDate.value,\r\n        interviewDetails:schedule\r\n      }).then((snap) => {// call back function\r\n        \r\n        // Save the interviewDate for the candidates who are scheduled for interiew\r\n        for(let i=0;i<this.applicantKeys.length;i++)\r\n        this.applicantList.update(this.applicantKeys[i],{\r\n            interviewDate:snap.key,\r\n            interviewStatus:'Not Reported'\r\n            \r\n        }).then(()=>{\r\n          let alert = this.alertCtrl.create({\r\n            title: \"Success\",\r\n            subTitle: \"Schedule created succesfuly \",\r\n            buttons: ['OK']\r\n          });\r\n          \r\n          alert.present();\r\n          this.scheduleForm.reset()\r\n        this.applicantKeys=[]\r\n          \r\n\r\n        });\r\n        \r\n     });\r\n     \r\n   }//end of save schedule function\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/interview-schedule/interview-schedule.ts"],"sourceRoot":""}