{"version":3,"sources":["../../src/pages/apply-leave/apply-leave.module.ts","../../src/models/datepicker.ts","../../src/models/leave.model.ts","../../src/pages/apply-leave/apply-leave.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ApplyLeavePage } from './apply-leave';\r\nimport { CustomDatePicker } from '../../models/datepicker';\r\nimport { LeaveModel } from '../../models/leave.model';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ApplyLeavePage,\r\n    \r\n  ],\r\n  providers: [CustomDatePicker,LeaveModel],\r\n  imports: [\r\n    IonicPageModule.forChild(ApplyLeavePage),\r\n    ComponentsModule\r\n    ],\r\n\r\n})\r\nexport class ApplyLeavePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apply-leave/apply-leave.module.ts","\r\nimport {CalendarComponentOptions,CalendarModalOptions } from \"ion2-calendar\";\r\n\r\nimport { Component, Injectable } from '@angular/core'; \r\nimport { ModalController, ViewController } from 'ionic-angular';\r\nimport { resolve } from \"path\";\r\n\r\n\r\n@Injectable()\r\nexport class CustomDatePicker{\r\n    \r\nconstructor(public modalCtrl:ModalController){}\r\ntony:any\r\n t:number=5\r\n\r\n datePickerOptions(pickMode,defaultScrollTo,from,dateLimitTo?,disableWeeks?)  {\r\n \r\n    const options: CalendarModalOptions = {\r\n        pickMode: pickMode,\r\n        showAdjacentMonthDay:false,\r\n        disableWeeks: disableWeeks,\r\n        from:from,\r\n        to: dateLimitTo,\r\n        defaultScrollTo:defaultScrollTo,\r\n        \r\n        \r\n       \r\n        \r\n        \r\n    }\r\n    return options\r\n        \r\n    \r\n    \r\n}\r\n\r\n\r\n\r\n  getMonths(){\r\n    return [{'monthName':'January','value':'01'},\r\n            {'monthName':'February','value':'02'},  \r\n            {'monthName':'March','value':'03'},\r\n            {'monthName':'April','value':'04'},  \r\n            {'monthName':'May','value':'05'},  \r\n            {'monthName':'June','value':'06'},  \r\n            {'monthName':'July','value':'07'}, \r\n            {'monthName':'August','value':'08'},  \r\n            {'monthName':'September','value':'09'},  \r\n            {'monthName':'October','value':'10'},  \r\n            {'monthName':'November','value':'11'},  \r\n            {'monthName':'December','value':'12'}]\r\n\r\n    }     \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/datepicker.ts","\r\n\r\n\r\nimport { leaves,leaveCount } from '../providers/user-leaves';\r\n\r\nimport { AngularFireDatabase,AngularFireList } from '@angular/fire/database';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Injectable } from '@angular/core';\r\nimport { AlertController, NavController, LoadingController } from 'ionic-angular';\r\nimport { leave } from '@angular/core/src/profile/wtf_impl';\r\nimport * as moment from 'moment'\r\nimport { exists } from 'fs';\r\n\r\n@Injectable()\r\nexport class LeaveModel{\r\nmonthNumber:number[]=[]\r\nleave={} as leaves\r\nleaveCount={} as leaveCount\r\nloader:any\r\nloader1:any\r\n\r\n  constructor( public loadingCtrl:LoadingController,private afauth:AngularFireAuth,private firebase:AngularFireDatabase,private alertCtrl:AlertController){\r\n   \r\n  }\r\n  \r\n   arrangeDates(date:any){\r\n        \r\n        let selectedDates=[]\r\n        let date1=[]\r\n        let date2=[]\r\n\r\n         date.forEach((values)=>{\r\n          selectedDates.push(moment(values.time).format('D-MMM-YYYY'))// Converting the time property returned from date pikcer to  dates .\r\n\r\n             //selectedDates.push(new Date(values.time).toLocaleDateString())// Converting the time property returned from date pikcer to  dates .\r\n             this.monthNumber.push(values.months)//Taking the month number which user has selected for  leave\r\n\r\n          })   \r\n          \r\n         \r\n          this.monthNumber = this.monthNumber.filter((elem, i, arr) => {\r\n             if (arr.indexOf(elem) === i) {\r\n               return elem\r\n             }\r\n           })\r\n           \r\n           \r\n        \r\n        if(this.monthNumber.length===1){\r\n           selectedDates.forEach(date=>{\r\n             date1.push(date);\r\n           });\r\n          \r\n         }\r\n         \r\n         else if(this.monthNumber.length===2){\r\n          selectedDates.forEach(date=>{\r\n           if(moment(date).format('M')===this.monthNumber[0].toString())\r\n             date1.push(date);\r\n            if(moment(date).format('M')===this.monthNumber[1].toString())\r\n            date2.push(date);\r\n           });\r\n        }\r\n           return ({date1,date2})\r\n       }\r\n\r\n\r\n       async submitLeaveRequest(leaveInfo){\r\n        \r\n      \r\n        var userName:any\r\n        let leaveExists:Boolean=false\r\n        let leaveExistDate=[]\r\n        await this.firebase.database.ref(`EmployeeLeaves`).orderByChild(`userId`).equalTo(`${leaveInfo.userId}`).once('value',(snap)=>{\r\n          snap.forEach((child)=>{\r\n            \r\n            child.child('date').val().forEach(val=>{\r\n              if(leaveInfo.date2){\r\n                if((leaveInfo.date.find(date=>date==val) || leaveInfo.date2.find(date=>date==val)) && !leaveExists ){\r\n                  leaveExists=true\r\n                  leaveExistDate.push(val)\r\n                  \r\n               }\r\n              }\r\n              else{\r\n                if(leaveInfo.date.find(date=>date==val) && !leaveExists ){\r\n                  leaveExists=true\r\n                  leaveExistDate.push(val)\r\n               }\r\n              }\r\n            })\r\n          \r\n          })\r\n        })\r\n\r\n        if(leaveExists){\r\n          let alert = this.alertCtrl.create({\r\n            title: \"Error\",\r\n            subTitle: \"Could not process your request. Leave record already exists on \"+ leaveExistDate+\".\",\r\n            buttons: ['OK']\r\n          });\r\n              alert.present();\r\n              \r\n        }\r\n\r\n        else{\r\n\r\n        await this.firebase.database.ref(`users/${leaveInfo.userId}`).once('value',(snap)=>{\r\n          \r\n          userName=snap.child('fname').val()+\" \"+snap.child('lname').val()\r\n        })\r\n  \r\n        this.leave.status=\"pending\";\r\n        \r\n        \r\n       if(moment().hour()>=9  &&  leaveInfo.date.find(date=>date===moment().format('D-MMM-YYYY'))){\r\n         const alert = this.alertCtrl.create({\r\n            title: 'Restricted',\r\n            subTitle: 'Unable to process your request at this moment. Please contact your team leader.!',\r\n            buttons: ['OK']\r\n            });\r\n          alert.present();\r\n      }\r\n        \r\n      else{\r\n        if(leaveInfo.date2){\r\n          var x=this.firebase.list(`EmployeeLeaves`).push({\r\n            'name':userName,\r\n            'leaveType':leaveInfo.leaveType,\r\n            'date':leaveInfo.date,\r\n            'status':leaveInfo.status,\r\n            'userId':leaveInfo.userId\r\n            //'count':this.leave.count\r\n           }).then(()=>{\r\n            var y=this.firebase.list(`EmployeeLeaves`).push({\r\n              'name':userName,\r\n              'leaveType':leaveInfo.leaveType,\r\n              'date':leaveInfo.date2,\r\n              'status':leaveInfo.status,\r\n              'userId':leaveInfo.userId\r\n          })\r\n           \r\n          })//inserting the details of leaves\r\n          \r\n        }\r\n        else\r\n            this.firebase.list(`EmployeeLeaves`).push({\r\n              'name':userName,\r\n              'leaveType':leaveInfo.leaveType,\r\n              'date':leaveInfo.date,\r\n              'status':leaveInfo.status,\r\n              'userId':leaveInfo.userId\r\n            });\r\n      \r\n            let alert = this.alertCtrl.create({\r\n              title: \"Success\",\r\n              subTitle: \"Leave applied successfully \",\r\n              buttons: ['OK']\r\n            });\r\n                alert.present();\r\n       \r\n      }//end of if else \r\n           \r\n         \r\n       \r\n    }// end of leaveExist condition\r\n      }//end os submit leave request function\r\n\r\n\r\n\r\n      pastLeaves=[]\r\n  \r\n       getPastLeaves(userId,dateFrom?,dateTo?){\r\n        this.loader=this.loadingCtrl.create({\r\n          spinner:'dots',\r\n          content:'Loading',\r\n           dismissOnPageChange:true\r\n         })\r\n       this.loader.present()\r\n            var pastLeaves=[]\r\n            var flag:boolean=false\r\n            this.firebase.database.ref(`EmployeeLeaves`).orderByChild(`userId`).equalTo(`${userId}`).once('value',(snap)=>{\r\n              if(dateFrom !=null && dateTo !=null) \r\n              {\r\n                  snap.forEach(function(child){\r\n\r\n                    if(child.child('date').val().length>1){\r\n                      child.child('date').forEach(data=>{\r\n                        \r\n                        if(new Date(data.val()).getTime()>=dateFrom && new Date(data.val()).getTime()<=dateTo)\r\n                            flag=true\r\n                          else\r\n                            flag=false\r\n                        });\r\n                        if(flag)\r\n                        pastLeaves.push({\r\n                          $recKey:child.key,\r\n                          ...child.val()\r\n                        })\r\n\r\n                      }\r\n                      else{\r\n                        if(new Date(child.child('date').val()).getTime()>=dateFrom && new Date(child.child('date').val()).getTime()<=dateTo)\r\n                        pastLeaves.push({\r\n                          $recKey:child.key,\r\n                          ...child.val()\r\n                        })\r\n                      }\r\n                     \r\n                    })\r\n              }\r\n              else{\r\n                snap.forEach(function(child){\r\n\r\n                  if(child.child('date').val().length>1){\r\n                    child.child('date').forEach(data=>{\r\n                      \r\n                      if(new Date(data.val()).getMonth()+1===new Date().getMonth()+1 && new Date(data.val()).getFullYear()===new Date().getFullYear())\r\n                      flag=true\r\n                        else\r\n                          flag=false\r\n                      });\r\n                      if(flag)\r\n                      pastLeaves.push({\r\n                        $recKey:child.key,\r\n                        ...child.val()\r\n                      })\r\n\r\n                    }\r\n                    else{\r\n                      if(new Date(child.child('date').val()).getMonth()+1===new Date().getMonth()+1 && new Date(child.child('date').val()).getFullYear()===new Date().getFullYear())\r\n                      pastLeaves.push({\r\n                        $recKey:child.key,\r\n                        ...child.val()\r\n                      })\r\n                    }\r\n                   \r\n                  })\r\n\r\n              }\r\n              \r\n       })//end of database ref\r\n      \r\n     \r\n\r\n      \r\n       this.loader.dismiss()\r\n       return this.pastLeaves=pastLeaves.reverse()\r\n         \r\n        \r\n            \r\n        \r\n   }//end of function\r\n    \r\n     async getRemainingLeaves(userId){\r\n      this.loader1=this.loadingCtrl.create({\r\n        spinner:'dots',\r\n        content:'Loading',\r\n         dismissOnPageChange:true\r\n       })\r\n      this.loader1.present()\r\n     let remaininingLeaves=[]\r\n     let count:number=0\r\n     let casual:any\r\n     let sick:any\r\n     \r\n         await this.firebase.database.ref(`AvailableLeaves/${new Date().getFullYear()}/${userId}`).once('value',(snapshot)=>{\r\n            casual=snapshot.child('casual').val()\r\n            sick=snapshot.child('sick').val()\r\n            \r\n        \r\n       }) \r\n       await this.firebase.database.ref(`EmployeeLeaves`).orderByChild(`userId`).equalTo(`${userId}`).once('value',(snap)=>{\r\n             snap.forEach((child)=>{\r\n               if(child.child('status').val()===\"approved\")\r\n                  if(child.child('date').val().length>1){\r\n                     child.child('date').forEach(data=>{\r\n                       if(new Date(data.val()).getMonth()+1===new Date().getMonth()+1 && new Date(data.val()).getFullYear()===new Date().getFullYear())\r\n                       count+=1\r\n                       });\r\n                     }\r\n                     else{\r\n                       if(new Date(child.child('date').val()).getMonth()+1===new Date().getMonth()+1 && new Date(child.child('date').val()).getFullYear()===new Date().getFullYear())\r\n                         count+=1;\r\n                     }\r\n                     \r\n                     });// ed of for each\r\n                     \r\n                      remaininingLeaves.push({'casual':casual,'sick':sick,'currentMonthLeave':count})\r\n                      \r\n                     })//end of snap\r\n                  \r\n                      \r\n                //})//end of then\r\n                this.loader1.dismiss()\r\n                return (remaininingLeaves)\r\n                \r\n   }\r\n\r\n   \r\n   viewLeaveRequest(){\r\n    this.loader=this.loadingCtrl.create({\r\n      spinner:'dots',\r\n      content:'Loading',\r\n       dismissOnPageChange:true\r\n     })\r\n    this.loader.present()\r\n    let leaveRequests=[]\r\n      \r\n   this.firebase.database.ref(`EmployeeLeaves`).orderByChild('status').equalTo('pending').on(\"value\", (snap)=> {\r\n         snap.forEach((child)=>{\r\n           leaveRequests.push({\r\n             $key:child.key,\r\n             ...child.val()\r\n           })\r\n         })\r\n         \r\n     })\r\n     this.loader.dismiss()\r\n     return leaveRequests.reverse()\r\n    \r\n   }\r\n\r\n\r\n\r\n   \r\nsaveLeaveStatus(data,leaveCount,status:string,reason?:any){\r\n  \r\n  if(status==\"approved\"){\r\n  let count:number\r\n \r\n  if(data.leaveType==\"casual\")\r\n    count=leaveCount.casualRemaining-data.date.length;\r\n  else\r\n    count=leaveCount-data.date.length;\r\n\r\n  this.firebase.database.ref(`EmployeeLeaves/${data.$key}/status`).set(`${status}`).then(()=>{\r\n  this.firebase.database.ref(`AvailableLeaves/${new Date().getFullYear()}/${data.userId}/${data.leaveType}`).set(count)\r\n  })\r\n  }\r\n  else{\r\n    this.firebase.database.ref(`EmployeeLeaves/${data.$key}`).update({'status':`${status}`,'reason':`${reason}`})\r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\n\r\n\r\n}// end of class\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/leave.model.ts","import { leave } from '@angular/core/src/profile/wtf_impl';\r\nimport { leaveCount,leaves } from './../../providers/user-leaves';\r\nimport { Component} from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController, Form, AlertController, LoadingController } from 'ionic-angular';\r\nimport { CalendarModal,CalendarResult} from \"ion2-calendar\";\r\n\r\nimport { LeaveModel } from '../../models/leave.model';\r\nimport { CustomDatePicker } from '../../models/datepicker';\r\n\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport {FormControl, FormGroup,Validators, FormBuilder} from '@angular/forms'\r\n\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\nimport * as moment from 'moment'\r\n\r\n\r\n\r\n\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-apply-leave',\r\n  templateUrl: 'apply-leave.html',\r\n})\r\nexport  class ApplyLeavePage{\r\n \r\n\r\nleaveCount={} as leaveCount\r\nleaveInfo={} as leaves\r\nionSegmentDefaultValue:string\r\nleaveRecords:any\r\nleaveDates:any\r\ndateRange:any=\"This Month Leave\"\r\nmonths=this.customDatePicker.getMonths()\r\nloader:any\r\n constructor(public loadingCtrl:LoadingController,private alertCtrl:AlertController,private formBuilder:FormBuilder,private afauth:AngularFireAuth,public navCtrl: NavController, public navParams: NavParams,private modalCtrl:ModalController,private customDatePicker:CustomDatePicker,private userLeave:LeaveModel,private firebase:AngularFireDatabase) {\r\n    this.getRemainingLeave()\r\n            \r\n     }\r\n\r\n     ionViewDidEnter(){\r\n      this.ionSegmentDefaultValue=\"applyLeave\";\r\n      \r\n      }\r\n     \r\n     \r\n     \r\n\r\n     ionViewDidLeave() {\r\n      this.navCtrl.popToRoot();\r\n      this.resetForm()\r\n\r\n    }\r\n  \r\n    getRemainingLeave(){\r\n      \r\n      this.dateRange=\"This Month Leave\"\r\n      this.leaveRecords=[]\r\n      this.leaveDates=\"\"\r\n      this.viewRemainingLeaves()\r\n\r\n    }\r\n\r\n    resetForm(){\r\n      this.leaveForm.reset()\r\n        this.leaveErr=true;\r\n        this.dateErr=true;\r\n    }\r\n\r\n \r\n\r\n  leaveForm= this.formBuilder.group({\r\n    \r\n    leaveType  :['',Validators.requiredTrue],\r\n    date  :['',Validators.required],\r\n    \r\n      \r\n   \r\n});\r\n\r\n\r\n\r\n   datePicker(pickMode){\r\n    \r\n   let dateLimit=moment().add(45, 'days');// Display  45 days from today\r\n   var defaultScrollTo=moment()// scroll to curren date\r\n    let disableWeek=[0,6]// disable Sunday-0 and Saturday-6\r\n    if(pickMode=='multi'){// Select multiple dates fron date picker\r\n    let from=moment()// current date selected in date picker\r\n    var options=this.customDatePicker.datePickerOptions(pickMode,defaultScrollTo,from,dateLimit,disableWeek)\r\n    }\r\n    else{// for selecting range of dates\r\n      let from=moment('1/2/2018','D/M/YYYY')// default starting date is set to Feb 2018\r\n      var options=this.customDatePicker.datePickerOptions(pickMode,defaultScrollTo,from)\r\n    }\r\n    let myCalendar =  this.modalCtrl.create(CalendarModal, {\r\n      options: options,\r\n      });\r\n         \r\n      myCalendar.present();\r\n       \r\n      myCalendar.onDidDismiss((date: CalendarResult[]) => {\r\n        if(date!=null){\r\n        if(pickMode==='multi'){\r\n          \r\n        date.sort(function (a, b) { // sorting the dates in ascending order with the time property\r\n          return a.time - b.time;\r\n        });\r\n            \r\n          let selectedDates=this.userLeave.arrangeDates(date)\r\n            this.leaveDates=selectedDates.date1+\",\"+selectedDates.date2// header display\r\n              this.leaveInfo.date=selectedDates.date1;\r\n              if(selectedDates.date2.length>0)\r\n                this.leaveInfo.date2=selectedDates.date2;\r\n      }\r\n      else{\r\n        \r\n        let from=moment(date['from'].string).format('D/MMM/YYYY')\r\n        let to=moment(date['to'].string).format('D/MMM/YYYY')\r\n        this.dateRange=from+\" to \"+to\r\n        this.leaveHistory(date['from'].time,date['to'].time)\r\n      }\r\n      }\r\n    \r\n\r\n     })//end of displayCalendar function\r\n    }// end of datepicker function\r\n\r\n\r\n  leaveErr:boolean=true\r\n  dateErr:boolean=true\r\n applyForLeave(leaveInfo){\r\n   \r\n   \r\n\r\n   leaveInfo.leaveType==null?this.leaveErr=false:this.leaveErr=true\r\n    leaveInfo.date==null?this.dateErr=false:this.dateErr=true \r\n            \r\n      \r\n\r\n\r\n  if(this.leaveErr && this.dateErr){\r\n\r\n   leaveInfo.userId=this.afauth.auth.currentUser.uid\r\n   leaveInfo.status=\"pending\"\r\n   this.userLeave.submitLeaveRequest(leaveInfo)\r\n  this.leaveForm.reset()\r\n}\r\n    \r\n}\r\n \r\n\r\n \r\n  leaveHistory(from?,to?){\r\n    this.leaveForm.reset()\r\n    this.leaveRecords=[]\r\n    \r\n   this.leaveRecords=this.userLeave.getPastLeaves(this.afauth.auth.currentUser.uid,from,to)\r\n   \r\n }\r\n\r\n    viewRemainingLeaves(){\r\n      \r\n      \r\n        this.userLeave.getRemainingLeaves(this.afauth.auth.currentUser.uid).then((item)=>{\r\n        this.leaveCount.sickRemaining=item[0].sick;\r\n        this.leaveCount.casualRemaining=item[0].casual;\r\n        this.leaveCount.currentMonthLeave=item[0].currentMonthLeave\r\n        \r\n        \r\n      })\r\n      \r\n      \r\n    }\r\n    \r\n   deleteLeave($key){\r\n    \r\n    const confirm = this.alertCtrl.create({\r\n      title:'Confirm',\r\n      message: 'Do you want to cancel this leave request',\r\n      buttons: [\r\n        {\r\n          text: 'Yes',\r\n          handler: () => {\r\n            \r\n            this.firebase.database.ref(`EmployeeLeaves`).child(`${$key}`).remove()\r\n            this.leaveHistory();\r\n           \r\n            \r\n          }\r\n        },\r\n        {\r\n          text: 'No',\r\n          handler: () => {\r\n            \r\n          }\r\n        }\r\n      ]\r\n    });\r\n    confirm.present();\r\n   } \r\n  \r\n}// end of class\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apply-leave/apply-leave.ts"],"sourceRoot":""}