{"version":3,"sources":["../../src/pages/upload-events/upload-events.module.ts","../../src/pages/upload-events/upload-events.ts","../../src/providers/designations.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { UploadEventsPage } from './upload-events';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UploadEventsPage,\r\n    \r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(UploadEventsPage),\r\n  ],\r\n})\r\nexport class UploadEventsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/upload-events/upload-events.module.ts","import { map } from 'rxjs/operators';\r\nimport { Firebase } from '@ionic-native/firebase';\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams,AlertController } from 'ionic-angular';\r\nimport {FormControl,FormGroup,Validators}from '@angular/forms';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Designations } from '../../providers/designations';\r\n\r\n/**\r\n * Generated class for the UploadEventsPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-upload-events',\r\n  templateUrl: 'upload-events.html',\r\n})\r\nexport class UploadEventsPage {\r\n\r\n\r\n  designations=new Designations().designations\r\n  messages:string\r\n\r\n\r\n  constructor(public alert:AlertController,public navCtrl: NavController, public navParams: NavParams,public firebase:AngularFireDatabase,public afauth:AngularFireAuth) {\r\n    this.messages=\"compose\"\r\n  }\r\n\r\n \r\n\r\n  PublishMessageForm=new FormGroup({\r\n    subject:new FormControl('',[Validators.required]),\r\n    message:new FormControl('',[Validators.required]),\r\n    recipients:new FormControl('',[Validators.required]),\r\n    postedBy:new FormControl(''),\r\n    time:new FormControl(''),\r\n    date:new FormControl(''),\r\n\r\n});\r\n\r\nasync publishMessage(){\r\n let sentTo=this.recipients\r\n  let users=[]\r\n  let sender:string\r\n  await this.firebase.database.ref(`users/${this.afauth.auth.currentUser.uid}`).once('value',(snap)=>{\r\n         sender=(snap.child('fname').val()+\" \"+snap.child('lname').val())\r\n  })\r\n\r\n  await this.firebase.database.ref(`users`).once('value',(snap)=>{\r\n    \r\n     snap.forEach(function(childSnapshot) {\r\n      if(childSnapshot.child('status').val()===\"active\"){\r\n        for(let i=0;i<sentTo.length;i++)\r\n          if(sentTo[i]==\"All\"){\r\n            users.push(childSnapshot.key)\r\n          }\r\n        else{\r\n          if(childSnapshot.child('position').val()===sentTo[i])\r\n              users.push(childSnapshot.key)\r\n          }\r\n        }\r\n      });\r\n})\r\n\r\n  this.PublishMessageForm.controls['date'].setValue(new Date().toLocaleDateString())\r\n  this.PublishMessageForm.controls['time'].setValue(new Date().toLocaleTimeString())\r\n  this.PublishMessageForm.controls['postedBy'].setValue(sender)\r\n \r\n  for(let i=0;i<users.length;i++)\r\n   this.firebase.list(`messages/${users[i]}`).push({\r\n     'date':this.PublishMessageForm.controls['date'].value,\r\n     'message':this.PublishMessageForm.controls['message'].value,\r\n     'postedBy':this.PublishMessageForm.controls['postedBy'].value,\r\n     'subject':this.PublishMessageForm.controls['subject'].value,\r\n     'time':this.PublishMessageForm.controls['time'].value\r\n   })\r\n\r\n    this.firebase.list(`sentmessages/${this.afauth.auth.currentUser.uid}`).push({\r\n      'recipients':this.recipients,\r\n      'date':this.PublishMessageForm.controls['date'].value,\r\n     'message':this.PublishMessageForm.controls['message'].value,\r\n     'subject':this.PublishMessageForm.controls['subject'].value,\r\n     'time':this.PublishMessageForm.controls['time'].value\r\n    })\r\n \r\n  }\r\n\r\n\r\n\r\n\r\n\r\n recipients=[]\r\n addRecipients(){\r\n   \r\n  let alert = this.alert.create();\r\n  alert.setTitle('Choose Recipients');\r\n  alert.addInput({\r\n    type: 'checkbox',\r\n    label: \"All\",\r\n    value: \"All\"\r\n});\r\n  for (let i=0;i<this.designations.length;i++) {\r\n        alert.addInput({\r\n         type: 'checkbox',\r\n         label: this.designations[i],\r\n         value: this.designations[i]\r\n    });\r\n }\r\n alert.addButton('Cancel');\r\n alert.addButton({\r\n   text: 'OK',\r\n   handler: data => {\r\n    this.recipients = data;\r\n    this.PublishMessageForm.controls['recipients'].setValue(data);\r\n   }\r\n });\r\n\r\n alert.present();\r\n \r\n }\r\n\r\n\r\nsentItems=[]\r\n getSentItems(){\r\n    this.firebase.list(`sentmessages/${this.afauth.auth.currentUser.uid}`).snapshotChanges().subscribe(snap=>{\r\n        this.sentItems=snap.map(items=>{\r\n          return{\r\n            $key:items.key,\r\n            ...items.payload.val()\r\n          }\r\n        }).reverse()\r\n    })\r\n        \r\n }\r\n\r\n\r\n viewMessage(message) {\r\n  const alert = this.alert.create({\r\n    title: \"Subject: \"+message.subject,\r\n    subTitle:\"Recipients: \"+message.recipients,\r\n    message:\"Message: \"+message.message,\r\n    buttons: ['OK']\r\n  });\r\n  alert.present();\r\n}\r\n \r\n\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/upload-events/upload-events.ts","export class Designations{\r\n    \r\n designations=[\r\n        'HR Execuitive',\r\n        'Intern',\r\n        'Jr.Software Engineer',\r\n        'Product Manager',\r\n        'Project Manager',\r\n        'QA Manager',\r\n        'Sr.Software Engineer',\r\n        'Sr.Software Developer',\r\n        'Support Specialist',\r\n        'Sales Support Manager',\r\n        'Software Developer',\r\n        'Software Test Engineer',\r\n        'Sr.Support Specialist',\r\n        'Team Lead']\r\n\r\n          \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/designations.ts"],"sourceRoot":""}